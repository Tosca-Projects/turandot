tosca_definitions_version: tosca_simple_yaml_1_3

imports:

- data.yaml

interface_types:

  # Execution

  Execution:
    inputs:
      phase:
        type: string
      requirements:
        type: ExecutionRequirements
        required: false
      pods:
        type: ExecutionPods
        default: All
    operations:
      execute: {}

  CloutExecution:
    description: >-
      Implementations are names of scriptlets within the Clout.
    derived_from: Execution

  CommandExecution:
    derived_from: Execution
    description: >-
      Base type for command executions.

      The implementation is the command to execute. Additional arguments can be added via the
      "arguments" input.
    inputs:
      arguments:
        description: >-
          Arguments to add to the command.
        type: list
        entry_schema: string
        required: false
      files:
        description: >-
          A list of files to copy to the target before execution. The source URLs can be the result
          of a get_artifact function call. 
        type: list
        entry_schema: File
        required: false

  ContainerExecution:
    description: >-
      Uses the SPDY executor on the "exec" subresource of the pods.
    derived_from: CommandExecution
    inputs:
      container:
        description: >-
          The name of the container in the pods in which to execute.
        type: string

  SSHExecution:
    description: >-
      Uses SSH to execute commands.
    derived_from: CommandExecution
    inputs:
      host:
        type: string
      username:
        type: string
      key:
        type: string
